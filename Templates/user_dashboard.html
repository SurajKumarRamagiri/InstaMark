{% load static %}
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>
   InstaMark Admin Dashboard
  </title>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&amp;display=swap" rel="stylesheet"/>
  <style>
   @keyframes progress {
    0% {
     width: 0;
    }
    100% {
     width: 100%;
    }
   }
  </style>
 </head>
 <body class="font-roboto bg-gray-100">
  <header class="bg-blue-600 text-white p-4 flex justify-between items-center sticky top-0 z-50 h-14">
   <div class="text-2xl font-bold">
    InstaMark
   </div>
   <div class="flex items-center space-x-4">
    <span class="hidden md:inline">
     {{ user.username }}
    </span>
    <div class="relative">
     <i class="fas fa-bell cursor-pointer">
     </i>
     <div class="absolute right-0 mt-2 w-64 bg-white text-black shadow-lg hidden group-hover:block">
      <ul>
       <!-- Example notification -->
       <li class="p-2 border-b">
        John Doe logged in at 10:00 AM
       </li>
      </ul>
     </div>
    </div>
    <div class="relative group">
     <img src="{% static 'img/user_logo.jpeg' %}" alt="Profile picture of the logged-in admin" class="w-8 h-8 rounded-full cursor-pointer" height="30" src="{{ user.profile_picture }}" width="30"/>
     <div class="absolute right-0 mt-2 w-48 bg-white text-black shadow-lg hidden group-hover:block">
      <a class="block px-4 py-2" href="#">
       Profile Settings
      </a>
      <a class="block px-4 py-2" href="{% url 'logout' %}">
       Logout
      </a>
     </div>
    </div>
   </div>
  </header>
  
  <!-- Main Content -->
  <div class="container mx-auto px-4 py-8 flex-1">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
     <!-- User Info Card -->
          <!-- User Info Card -->
          <div class="bg-white p-6 rounded-lg shadow-md">
            <div class="flex flex-col items-center space-y-4">
             <img alt="User profile picture with a smiling face" class="h-24 w-24 rounded-full" height="100" src="https://storage.googleapis.com/a1aa/image/JJUxDmzVU1IYJtt4s1byTYg02QFXFzBgzPhszEhbsR6eBdfTA.jpg" width="100"/>
             <div class="text-center">
              <h2 class="text-xl font-semibold">
                {{ user.username }}
              </h2>
              <p class="text-gray-600">
                {{ user.job_title }}
              </p>
             </div>
            </div>
            <div class="mt-4 text-center">
             <p class="text-gray-600">
              <i class="fas fa-envelope mr-2">
              </i>
              {{ user.email }}
             </p>
             <p class="text-gray-600">
              <i class="fas fa-phone mr-2">
              </i>
              {{ user.phone_number }}
             </p>
            </div>
           </div>

     <!-- Attendance Summary Card -->
     <div class="bg-white p-6 rounded-lg shadow-md col-span-2">
      <h2 class="text-xl font-semibold mb-4">
       Attendance Summary
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
       <div class="bg-green-100 p-4 rounded-lg flex items-center">
        <i class="fas fa-check-circle text-green-500 text-3xl mr-4">
        </i>
        <div>
         <h3 class="text-lg font-semibold">
          Present
         </h3>
         <p class="text-gray-600">
          {{ attendance_summary.present_count }} days ({{ attendance_summary.overall_percentage }}%)
         </p>
        </div>
       </div>
       <div class="bg-red-100 p-4 rounded-lg flex items-center">
        <i class="fas fa-times-circle text-red-500 text-3xl mr-4">
        </i>
        <div>
         <h3 class="text-lg font-semibold">
          Absent
         </h3>
         <p class="text-gray-600">
          {{ attendance_summary.absent_count }} days
         </p>
        </div>
       </div>
       <div class="bg-yellow-100 p-4 rounded-lg flex items-center">
        <i class="fas fa-clock text-yellow-500 text-3xl mr-4">
        </i>
        <div>
         <h3 class="text-lg font-semibold">
          Late
         </h3>
         <p class="text-gray-600">
          {{ attendance_summary.late_count }} days
         </p>
        </div>
       </div>
       <div class="bg-blue-100 p-4 rounded-lg flex items-center">
        <i class="fas fa-calendar-alt text-blue-500 text-3xl mr-4">
        </i>
        <div>
         <h3 class="text-lg font-semibold">
          Total Days
         </h3>
         <p class="text-gray-600">
          {{ attendance_summary.total_days }} days
         </p>
        </div>
       </div>
       <div class="bg-purple-100 p-4 rounded-lg flex items-center col-span-2">
         <i class="fas fa-percentage text-purple-500 text-3xl mr-4">
         </i>
         <div>
          <h3 class="text-lg font-semibold">
           Overall Attendance
          </h3>
          <p class="text-gray-600">
           {{ attendance_summary.percentage }}%
          </p>
         </div>
        </div>
      </div>
     </div>
    </div>

    <!-- Recent Attendance Records -->
    <div class="mt-8 bg-white p-6 rounded-lg shadow-md">
     <h2 class="text-xl font-semibold mb-4">
      Recent Attendance Records
     </h2>
     <div class="overflow-x-auto">
      <table class="min-w-full bg-white">
       <thead>
        <tr>
         <th class="py-2 px-4 border-b">
          Date
         </th>
         <th class="py-2 px-4 border-b">
          Status
         </th>
         <th class="py-2 px-4 border-b">
          Check-in Time
         </th>
         <th class="py-2 px-4 border-b">
          Check-out Time
         </th>
        </tr>
       </thead>
       <tbody>
        {% for record in attendance_data %}
        <tr>
         <td class="py-2 px-4 border-b">
          {{ record.date }}
         </td>
         <td class="py-2 px-4 border-b {% if record.status == 'Present' %}text-green-600{% elif record.status == 'Absent' %}text-red-600{% else %}text-yellow-600{% endif %}">
          {{ record.status }}
         </td>
         <td class="py-2 px-4 border-b">
          {{ record.check_in_time }}
         </td>
         <td class="py-2 px-4 border-b">
          {{ record.check_out_time }}
         </td>
        </tr>
        {% endfor %}
       </tbody>
      </table>
     </div>
    </div>
   </div>

  <footer class="bg-blue-600 text-white text-center p-1 flex flex-col md:flex-row justify-between items-center fixed bottom-0 w-full h-8">
   <div>
    Â© 2024 InstaMark. All Rights Reserved.
   </div>
   <div class="flex space-x-4">
    <a href="#">
     Privacy Policy
    </a>
    <a href="#">
     Terms of Service
    </a>
    <a href="#">
     Support
    </a>
   </div>
   <div class="flex space-x-4 pr-4">
    <i class="fab fa-linkedin">
    </i>
    <i class="fab fa-twitter">
    </i>
    <i class="fab fa-facebook">
    </i>
   </div>
  </footer>
 </body>
</html>
